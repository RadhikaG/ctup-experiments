in vim:

%s/^\s*\(\w\+\)\s*=\s*ctup_runtime::self_collision_link_vs_link(.*);/\0\r  if (\1)\r    return 1;/g

%s/^\s*\(\w\+\)\s*=\s*ctup_runtime::link_vs_environment_collision(.*);/\0\r  if (\1)\r    return 1;/g
